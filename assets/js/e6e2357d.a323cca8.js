"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3506],{9277:(e,a,s)=>{s.r(a),s.d(a,{default:()=>f});var r=s(6540),n=s(1656),i=s(54),l=s(4467),t=s(4586);const c={profileContainer:"profileContainer_k08i",profileSection:"profileSection_rI5B",settingsSection:"settingsSection_y3uL",profileInfo:"profileInfo_u2ld",avatarDisplay:"avatarDisplay_ViP4",avatarImage:"avatarImage_cVpL",userInfo:"userInfo_IJoF",email:"email_uGv_",learningLevel:"learningLevel_W5IS",preferencesDisplay:"preferencesDisplay_ZnFz",preferenceGroup:"preferenceGroup_lViG",settingsDescription:"settingsDescription_H2WS",formGroup:"formGroup_vmVc",avatarGrid:"avatarGrid_D0Ni",avatarOption:"avatarOption_Elho",avatarSelected:"avatarSelected_OUPQ",personalizationSection:"personalizationSection_ZY6A",checkboxGroup:"checkboxGroup_dSWx",checkboxLabel:"checkboxLabel_M1C3",saveButton:"saveButton_MoAG",error:"error_V7fa",success:"success_ZMiy",loading:"loading_rdLf"};var o=s(4848);const d=["ROS 2","Gazebo","Python","ROS","Gazebo Sim","RViz","MoveIt","OpenCV"],h=["Humanoid robots","Manipulators","Sensors","Actuators","Mobile robots","Drones"],p=["Python","C++","JavaScript","TypeScript","Rust","Go"];function u(){const{user:e,loading:a}=(0,i.Z)(),{siteConfig:s}=(0,t.A)(),n=s.customFields?.authUrl||"http://localhost:3000",[u,f]=(0,r.useState)(null),[g,m]=(0,r.useState)([]),[v,x]=(0,r.useState)(!0),[j,b]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[S,w]=(0,r.useState)(null),[P,k]=(0,r.useState)(null),[G,_]=(0,r.useState)([]),[L,I]=(0,r.useState)([]),[C,z]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!e)return;(async()=>{try{x(!0);const[e,a]=await Promise.all([fetch(`${n}/api/personalization/profile`,{credentials:"include"}),fetch(`${n}/api/avatar/list`,{credentials:"include"})]);if(e.ok){const a=await e.json();f(a.profile),k(a.profile.selectedAvatarId),_(a.profile.softwarePreferences||[]),I(a.profile.hardwarePreferences||[]),z(a.profile.programmingLanguagePreferences||[])}if(a.ok){const e=await a.json();m(e.avatars||[])}}catch(e){console.error("Error fetching profile data:",e),N("Failed to load profile data")}finally{x(!1)}})()},[e,n]),(0,r.useEffect)(()=>{"undefined"!=typeof window&&"#settings"===window.location.hash&&setTimeout(()=>{const e=document.getElementById("settings");e&&e.scrollIntoView({behavior:"smooth"})},100)},[]);const A=(e,a,s)=>{a.includes(e)?s(a.filter(a=>a!==e)):s([...a,e])};if(a||v)return(0,o.jsx)("div",{className:"container margin-vert--lg",children:(0,o.jsx)("div",{className:c.loading,children:"Loading profile..."})});if(!e)return(0,o.jsx)("div",{className:"container margin-vert--lg",children:(0,o.jsx)("div",{className:c.error,children:"Please sign in to view your profile."})});const D=u?.name&&u.name.trim().length>0&&u.name.match(/[a-zA-Z0-9]/)?.[0].toUpperCase()||"?";return(0,o.jsx)("div",{className:"container margin-vert--lg",children:(0,o.jsxs)("div",{className:c.profileContainer,children:[(0,o.jsxs)("section",{className:c.profileSection,children:[(0,o.jsx)("h1",{children:"Profile"}),(0,o.jsxs)("div",{className:c.profileInfo,children:[(0,o.jsx)("div",{className:c.avatarDisplay,children:u?.selectedAvatarImageUrl?(0,o.jsx)("img",{src:u.selectedAvatarImageUrl,alt:"User avatar",className:c.avatarImage}):(0,o.jsx)(l.m,{letter:D,size:80})}),(0,o.jsxs)("div",{className:c.userInfo,children:[(0,o.jsx)("h2",{children:u?.name||u?.email||"User"}),(0,o.jsx)("p",{className:c.email,children:u?.email}),u?.learningLevel&&(0,o.jsxs)("p",{className:c.learningLevel,children:["Learning Level: ",(0,o.jsx)("strong",{children:u.learningLevel})]})]})]}),(u?.softwarePreferences?.length>0||u?.hardwarePreferences?.length>0||u?.programmingLanguagePreferences?.length>0)&&(0,o.jsxs)("div",{className:c.preferencesDisplay,children:[(0,o.jsx)("h3",{children:"Your Preferences"}),u.softwarePreferences?.length>0&&(0,o.jsxs)("div",{className:c.preferenceGroup,children:[(0,o.jsx)("strong",{children:"Software:"})," ",u.softwarePreferences.join(", ")]}),u.hardwarePreferences?.length>0&&(0,o.jsxs)("div",{className:c.preferenceGroup,children:[(0,o.jsx)("strong",{children:"Hardware:"})," ",u.hardwarePreferences.join(", ")]}),u.programmingLanguagePreferences?.length>0&&(0,o.jsxs)("div",{className:c.preferenceGroup,children:[(0,o.jsx)("strong",{children:"Programming Languages:"})," ",u.programmingLanguagePreferences.join(", ")]})]})]}),(0,o.jsxs)("section",{id:"settings",className:c.settingsSection,children:[(0,o.jsx)("h1",{children:"Settings"}),(0,o.jsx)("p",{className:c.settingsDescription,children:"Update your avatar and personalization preferences"}),y&&(0,o.jsx)("div",{className:c.error,children:y}),S&&(0,o.jsx)("div",{className:c.success,children:S}),(0,o.jsxs)("div",{className:c.formGroup,children:[(0,o.jsx)("label",{children:"Choose an Avatar"}),(0,o.jsx)("div",{className:c.avatarGrid,children:g.map(e=>(0,o.jsx)("button",{type:"button",className:`${c.avatarOption} ${P===e.id?c.avatarSelected:""}`,onClick:()=>k(P===e.id?null:e.id),"aria-label":`Select ${e.displayName||e.id}`,children:(0,o.jsx)("img",{src:e.imageUrl,alt:e.displayName||e.id})},e.id))})]}),(0,o.jsxs)("div",{className:c.personalizationSection,children:[(0,o.jsx)("h3",{children:"Personalization Preferences"}),(0,o.jsxs)("div",{className:c.formGroup,children:[(0,o.jsx)("label",{children:"Which software do you use?"}),(0,o.jsx)("div",{className:c.checkboxGroup,children:d.map(e=>(0,o.jsxs)("label",{className:c.checkboxLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:G.includes(e),onChange:()=>A(e,G,_)}),(0,o.jsx)("span",{children:e})]},e))})]}),(0,o.jsxs)("div",{className:c.formGroup,children:[(0,o.jsx)("label",{children:"Which hardware do you use or are interested in?"}),(0,o.jsx)("div",{className:c.checkboxGroup,children:h.map(e=>(0,o.jsxs)("label",{className:c.checkboxLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:L.includes(e),onChange:()=>A(e,L,I)}),(0,o.jsx)("span",{children:e})]},e))})]}),(0,o.jsxs)("div",{className:c.formGroup,children:[(0,o.jsx)("label",{children:"Which programming languages do you use?"}),(0,o.jsx)("div",{className:c.checkboxGroup,children:p.map(e=>(0,o.jsxs)("label",{className:c.checkboxLabel,children:[(0,o.jsx)("input",{type:"checkbox",checked:C.includes(e),onChange:()=>A(e,C,z)}),(0,o.jsx)("span",{children:e})]},e))})]})]}),(0,o.jsx)("button",{type:"button",onClick:async()=>{try{b(!0),N(null),w(null),P!==u?.selectedAvatarId&&await fetch(`${n}/api/personalization/avatar`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({avatarId:P})}),await fetch(`${n}/api/personalization/preferences`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({softwarePreferences:G.length>0?G:null,hardwarePreferences:L.length>0?L:null,programmingLanguagePreferences:C.length>0?C:null})}),w("Settings saved successfully!");const e=await fetch(`${n}/api/personalization/profile`,{credentials:"include"});if(e.ok){const a=await e.json();f(a.profile)}}catch(e){console.error("Error saving settings:",e),N("Failed to save settings. Please try again.")}finally{b(!1)}},disabled:j,className:c.saveButton,children:j?"Saving...":"Save Settings"})]})]})})}function f(){return(0,o.jsx)(i.O,{children:(0,o.jsx)(n.A,{title:"Profile",description:"View and edit your profile and preferences",children:(0,o.jsx)(u,{})})})}}}]);