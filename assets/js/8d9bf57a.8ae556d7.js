"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8353],{4255:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var t=s(6540),r=s(1656),n=s(54),i=s(4585),o=s(8774),l=s(4586),c=s(7229),d=s(4848);const u=["ROS 2","Gazebo","Python","ROS","Gazebo Sim","RViz","MoveIt","OpenCV"],h=["Humanoid robots","Manipulators","Sensors","Actuators","Mobile robots","Drones"],p=["Python","C++","JavaScript","TypeScript","Rust","Go"];function m({onSuccess:e}){const[a,s]=(0,t.useState)(""),[r,n]=(0,t.useState)(""),[m,g]=(0,t.useState)(""),[x,v]=(0,t.useState)(null),[b,w]=(0,t.useState)([]),[f,j]=(0,t.useState)([]),[S,A]=(0,t.useState)([]),[y,N]=(0,t.useState)([]),[C,k]=(0,t.useState)(null),[L,_]=(0,t.useState)(!1),[G,P]=(0,t.useState)(!0),{siteConfig:T}=(0,l.A)(),U=T.baseUrl||"",z=T.customFields?.authUrl||"http://localhost:3000",E=(0,i.ep)();(0,t.useEffect)(()=>{(async()=>{try{const e=await fetch(`${z}/api/avatar/list`,{credentials:"include"});if(e.ok){const a=await e.json();N(a.avatars||[])}}catch(e){console.error("Error fetching avatars:",e)}finally{P(!1)}})()},[z]);const $=(e,a,s)=>{a.includes(e)?s(a.filter(a=>a!==e)):s([...a,e])};return(0,d.jsxs)("div",{className:c.A.authContainer,children:[(0,d.jsx)("h2",{children:"Create Account"}),(0,d.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),k(null),!(e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))(a))return void k("Please enter a valid email address");const t=(e=>e.length<8?{valid:!1,message:"Password must be at least 8 characters long"}:/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?{valid:!0}:{valid:!1,message:"Password must contain at least one number"}:{valid:!1,message:"Password must contain at least one uppercase letter"}:{valid:!1,message:"Password must contain at least one lowercase letter"})(r);if(t.valid){_(!0);try{const s=await E.signUp.email({email:a,password:r,name:m||void 0});if(console.log("Sign up result:",s),s?.error){const e=s.error.message||s.error.toString();return e.toLowerCase().includes("email")||e.toLowerCase().includes("already")||e.toLowerCase().includes("exists")||e.toLowerCase().includes("duplicate")||e.toLowerCase().includes("unique")||"ACCOUNT_EXISTS"===s.error.code?k("An account with this email already exists. Please sign in or use a different email."):k(e),void _(!1)}if(s?.data?.user&&s?.data?.session){console.log("User automatically signed in:",s.data.user.email);try{x&&await fetch(`${z}/api/personalization/avatar`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({avatarId:x})}),(b.length>0||f.length>0||S.length>0)&&await fetch(`${z}/api/personalization/preferences`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({softwarePreferences:b.length>0?b:null,hardwarePreferences:f.length>0?f:null,programmingLanguagePreferences:S.length>0?S:null})})}catch(n){console.error("Error saving avatar/preferences:",n)}}if("undefined"!=typeof window){console.log("[SignUp] Sign-up successful, triggering navbar update..."),window.dispatchEvent(new CustomEvent("auth-state-change")),window.dispatchEvent(new StorageEvent("storage",{key:"better-auth.session",newValue:"updated"}));const a=async()=>{try{await new Promise(e=>setTimeout(e,300));const a=await E.getSession();a?.data?.user||a?.user?(console.log("[SignUp] Session verified, redirecting..."),window.dispatchEvent(new CustomEvent("auth-state-change")),e?e():window.location.href=`${U}dashboard`):(console.log("[SignUp] Session not immediately available, redirecting anyway..."),e?e():window.location.href=`${U}dashboard`)}catch(a){console.error("[SignUp] Error verifying session:",a),e?e():window.location.href=`${U}dashboard`}};setTimeout(a,200)}}catch(i){console.error("Sign up error:",i);const e=i.message||i.error?.message||i.data?.message||"Failed to create account. Please try again.";e.toLowerCase().includes("email")||e.toLowerCase().includes("already")||e.toLowerCase().includes("exists")||e.toLowerCase().includes("duplicate")||e.toLowerCase().includes("unique")?k("An account with this email already exists. Please sign in or use a different email."):k(e),_(!1)}}else k(t.message||"Invalid password")},className:c.A.authForm,children:[(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{htmlFor:"name",children:"Name (optional)"}),(0,d.jsx)("input",{id:"name",type:"text",value:m,onChange:e=>g(e.target.value),placeholder:"Your name",className:c.A.input})]}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{htmlFor:"email",children:"Email"}),(0,d.jsx)("input",{id:"email",type:"email",value:a,onChange:e=>s(e.target.value),placeholder:"your.email@example.com",required:!0,className:c.A.input})]}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{htmlFor:"password",children:"Password"}),(0,d.jsx)("input",{id:"password",type:"password",value:r,onChange:e=>n(e.target.value),placeholder:"At least 8 characters with uppercase, lowercase, and number",required:!0,className:c.A.input,minLength:8}),(0,d.jsx)("small",{className:c.A.helpText,children:"Password must be at least 8 characters with uppercase, lowercase, and number"})]}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{children:"Choose an Avatar (optional)"}),G?(0,d.jsx)("div",{className:c.A.loading,children:"Loading avatars..."}):(0,d.jsx)("div",{className:c.A.avatarGrid,children:y.map(e=>(0,d.jsx)("button",{type:"button",className:`${c.A.avatarOption} ${x===e.id?c.A.avatarSelected:""}`,onClick:()=>v(x===e.id?null:e.id),"aria-label":`Select ${e.displayName||e.id}`,children:(0,d.jsx)("img",{src:e.imageUrl,alt:e.displayName||e.id})},e.id))})]}),(0,d.jsxs)("div",{className:c.A.personalizationSection,children:[(0,d.jsx)("h3",{className:c.A.personalizationTitle,children:"Help us personalize your experience (optional)"}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{children:"Which software do you use?"}),(0,d.jsx)("div",{className:c.A.checkboxGroup,children:u.map(e=>(0,d.jsxs)("label",{className:c.A.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:b.includes(e),onChange:()=>$(e,b,w)}),(0,d.jsx)("span",{children:e})]},e))})]}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{children:"Which hardware do you use or are interested in?"}),(0,d.jsx)("div",{className:c.A.checkboxGroup,children:h.map(e=>(0,d.jsxs)("label",{className:c.A.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:f.includes(e),onChange:()=>$(e,f,j)}),(0,d.jsx)("span",{children:e})]},e))})]}),(0,d.jsxs)("div",{className:c.A.formGroup,children:[(0,d.jsx)("label",{children:"Which programming languages do you use?"}),(0,d.jsx)("div",{className:c.A.checkboxGroup,children:p.map(e=>(0,d.jsxs)("label",{className:c.A.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:S.includes(e),onChange:()=>$(e,S,A)}),(0,d.jsx)("span",{children:e})]},e))})]})]}),C&&(0,d.jsxs)("div",{className:c.A.error,children:[C,C.toLowerCase().includes("already exists")&&(0,d.jsx)("div",{className:c.A.errorActions,children:(0,d.jsx)(o.A,{to:`${U}signin`,className:c.A.errorLink,children:"Sign in instead"})})]}),(0,d.jsx)("button",{type:"submit",disabled:L||G,className:c.A.button,children:L?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:c.A.buttonSpinner}),"Creating Account..."]}):"Sign Up"})]}),(0,d.jsxs)("p",{className:c.A.footer,children:["Already have an account? ",(0,d.jsx)(o.A,{to:"/signin",children:"Sign in"})]})]})}function g(){return(0,d.jsx)(n.O,{children:(0,d.jsx)(r.A,{title:"Sign Up",description:"Create an account to access personalized features",children:(0,d.jsx)("div",{className:"container margin-vert--lg",children:(0,d.jsx)(m,{})})})})}},7229:(e,a,s)=>{s.d(a,{A:()=>t});const t={authContainer:"authContainer_I8tK",authForm:"authForm_WxR6",formGroup:"formGroup_ul3Y",input:"input_cq3m",helpText:"helpText_H4R7",button:"button_sYWY",buttonSpinner:"buttonSpinner_BuMd",spin:"spin_UlCx",error:"error_J0pE",errorActions:"errorActions_Y4B8",errorLink:"errorLink_s3ey",errorSeparator:"errorSeparator_LKly",footer:"footer_vHAS",avatarGrid:"avatarGrid_hbvx",avatarOption:"avatarOption_XmQ4",avatarSelected:"avatarSelected_Mvyi",personalizationSection:"personalizationSection_NEpo",personalizationTitle:"personalizationTitle_B3Ky",checkboxGroup:"checkboxGroup_ASns",checkboxLabel:"checkboxLabel_FDlu",loading:"loading_ntvW"}}}]);